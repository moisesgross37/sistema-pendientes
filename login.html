<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba de Login</title>
    <style>body { font-family: sans-serif; max-width: 500px; margin: 2em auto; }</style>
</head>
<body>
    <h1>Login</h1>
    <form id="loginForm">
        <input type="text" id="username" placeholder="Username" value="testuser1">
        <input type="password" id="password" placeholder="Password" value="password123">
        <button type="submit">Login</button>
    </form>
    <h2>Respuesta (Token):</h2>
    <pre id="response" style="background-color: #f0f0f0; padding: 1em; white-space: pre-wrap; word-wrap: break-word;"></pre>
    <script>
        document.getElementById('loginForm').addEventListener('submit', async function (event) {
            event.preventDefault();
            const data = {
                username: document.getElementById('username').value,
                password: document.getElementById('password').value,
            };
            const responseContainer = document.getElementById('response');
            responseContainer.textContent = 'Enviando...';
            try {
                const res = await fetch('http://localhost:3007/auth/login', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data),
                });
                const result = await res.json();
                if(result.access_token) {
                    responseContainer.textContent = `¡Éxito! Token recibido:\n\n${result.access_token}`;
                } else {
                    responseContainer.textContent = `Error:\n\n${JSON.stringify(result, null, 2)}`;
                }
            } catch (error) {
                responseContainer.textContent = 'Error de conexión.';
            }
        });
    </script>
</body>
</html>